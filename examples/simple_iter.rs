use smartaudio::SmartAudioParser;

fn main() {
    let raw: [u8; 72] = [
        0xAA, 0x55, 0x01, 0x06, 0x00, 0x00, 0x01, 0x16, 0xE9, 0x4D, // frame0
        0xAA, 0x55, 0x09, 0x06, 0x01, 0x00, 0x1A, 0x16, 0xE9, 0x0A, // frome1
        0xAA, 0x55, 0x11, 0x0C, 0x00, 0x00, 0x00, 0x16, 0xE9, 0x0E, 0x03, 0x00, 0x0E, 0x14, 0x1A,
        0x01, // frame2
        0xAA, 0x55, 0x02, 0x03, 0x00, 0x01, 0x0F, // frame3
        0xAA, 0x55, 0x02, 0x03, 0x0E, 0x01, 0x6D, // frame4
        0xAA, 0x55, 0x03, 0x03, 0x00, 0x01, 0x4A, // frame5
        0xAA, 0x55, 0x04, 0x04, 0x16, 0xE9, 0x01, 0xF8, // frame6
        0xAA, 0x55, 0x05, 0x03, 0x0A, 0x01, 0x4F, // frame7
    ];

    println!("Parssing frame from buffer using iterator:");

    let mut parser = SmartAudioParser::new();
    for frame in parser.iter_frames(&raw[..]) {
        println!("{:#?}", frame.unwrap())
    }
}
